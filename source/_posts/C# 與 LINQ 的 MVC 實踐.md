title: C# 與 LINQ 的 MVC 實踐
date: 2011-10-27 02:35:00
tags: [C#、ASP.NET]
---

  

<div class="WordSection1">

<div class="MsoNormal" style="text-indent: 24pt;"><span style="font-family: 新細明體, serif;">前幾天在看維基百科介紹</span><span lang="EN-US"> Ruby </span><span style="font-family: 新細明體, serif;">程式語言的時候，看到</span><span lang="EN-US">Ruby on Rails </span><span style="font-family: 新細明體, serif;">是</span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">一個 </span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: red; font-family: Arial, sans-serif;">MVC </span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">的快速網站開發應用框架</span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: Arial, sans-serif;">(Framework</span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">，在程式設計的領域是指一個提供該程式語言開發相關函數庫或是虛擬機器等等的環境</span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: Arial, sans-serif;">)</span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">，突然又出現一個縮寫名詞讓我忍不住轉而去查詢這個縮寫的意思，根據偉大的維基百科記載，</span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: Arial, sans-serif;">MVC</span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">的全文是：</span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: Arial, sans-serif;">Model-View-Controller</span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">，是軟體工程上面的一種 </span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: #0070c0; font-family: 新細明體, serif;">軟體設計模式 </span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: Arial, sans-serif;">(</span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">或</span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; font-family: 新細明體, serif;">稱</span><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: #0070c0; font-family: 新細明體, serif;">軟體架構</span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: Arial, sans-serif;">)</span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">，接著一看這三個名詞分別代表的意思：</span></span></div>

<div class="MsoNormal" style="margin-left: 24pt; text-indent: -24pt;"><span lang="EN-US" style="font-family: Wingdings;">ü<span style="font-family: 'Times New Roman'; font-size: 7pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;">   </span></span><span lang="EN-US" style="color: #0070c0;">M </span><span lang="EN-US">(</span><span style="font-family: 新細明體, serif;">模型</span><span lang="EN-US">Model) - </span><span style="font-family: 新細明體, serif;">程式設計師編寫程式應有的功能</span><span lang="EN-US">(</span><span style="font-family: 新細明體, serif;">實作演算法等等</span><span lang="EN-US">)</span><span style="font-family: 新細明體, serif;">、資料庫</span></div>

<div class="MsoNormal" style="margin-left: 96pt;"><span lang="EN-US" style="color: #0070c0;">   </span><span style="font-family: 新細明體, serif;">專家進行資料管理和資料庫設計</span><span lang="EN-US">(</span><span style="font-family: 新細明體, serif;">可以實作具體的功能</span><span lang="EN-US">)</span><span style="font-family: 新細明體, serif;">。</span></div>

<div class="MsoNormal" style="margin-left: 24pt; text-indent: -24pt;"><span lang="EN-US" style="font-family: Wingdings;">ü<span style="font-family: 'Times New Roman'; font-size: 7pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;">   </span></span><span lang="EN-US" style="color: #0070c0;">V </span><span lang="EN-US">(</span><span style="font-family: 新細明體, serif;">檢視</span><span lang="EN-US">View) - </span><span style="font-family: 新細明體, serif;">介面設計人員進行圖形介面設計。</span></div>

<div class="MsoNormal" style="margin-left: 24pt; text-indent: -24pt;"><span lang="EN-US" style="font-family: Wingdings;">ü<span style="font-family: 'Times New Roman'; font-size: 7pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;">   </span></span><span lang="EN-US" style="color: #0070c0;">C </span><span lang="EN-US">(</span><span style="font-family: 新細明體, serif;">控制器</span><span lang="EN-US">Controller)- </span><span style="font-family: 新細明體, serif;">負責轉發請求，對請求進行處理。                                 </span>(By Wiki - MVC)</div>

<div align="right" class="MsoNormal" style="margin-left: 24pt; text-align: right; word-break: break-all;"><span lang="EN-US">  
</span></div>

<div class="MsoNormal" style="text-indent: 24pt;"><span style="font-family: 新細明體, serif;">過去對於這種抽象的概念我往往不是很能夠馬上理解，或是需要藉由開發的例子才能夠知道箇中意義，但是看著上述的簡單解釋，突然覺得很熟悉…。</span></div>

<div class="MsoNormal" style="text-indent: 24pt;"><span style="font-family: 新細明體, serif;">對啦！這不就是類似微軟</span><span lang="EN-US"> .NET Framework </span><span style="font-family: 新細明體, serif;">下的</span> <span lang="EN-US">LINQ to SQL </span><span style="font-family: 新細明體, serif;">的設計方式嗎？再一次有種『過來人的經驗』的感受</span><span lang="EN-US">(</span><span style="font-family: 新細明體, serif;">第一次是上一次體會到</span><span lang="EN-US">LINQ</span><span style="font-family: 新細明體, serif;">與</span><span lang="EN-US">PEAR DB</span><span style="font-family: 新細明體, serif;">的相似</span><span lang="EN-US">)</span><span style="font-family: 新細明體, serif;">，馬上往下拉視窗，尋找 </span><span class="toctext"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: #f9f9f9; background-image: initial; background-origin: initial; color: #0070c0;">ASP.NET MVC</span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: #f9f9f9; background-image: initial; background-origin: initial; color: black;"> </span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: #f9f9f9; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">的標籤，果不其然，上面就是如此寫著：</span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">在</span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: Arial, sans-serif;">ASP.NET MVC</span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; font-family: 新細明體, serif;">中，一般情況下模型通常搭配[<span class="Apple-style-span" style="color: #3d85c6;"> </span>](http://www.blogger.com/goog_1495386588)</span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial;">[<span class="Apple-style-span" style="color: #3d85c6;">LINQ to SQL</span>](http://msdn.microsoft.com/zh-tw/library/bb386976.aspx)<span class="Apple-style-span" style="color: #0070c0;"> </span></span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">型別</span>。</span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: Arial, sans-serif;"></span></span></div>

<div class="MsoNormal" style="text-indent: 24pt;"><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">對於這三個的解釋我以過去開發系統時採用</span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black;">LINQ to SQL</span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">的例子做說明，首先要講一下整個目前的企業開發系統所採用的『三層式架構』：</span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black;"></span></span></div>

<div align="right" class="MsoNormal" style="text-align: right;"><span style="height: 33px; left: 0px; margin-left: 225px; margin-top: 19px; position: absolute; width: 109px; z-index: -5;">![](file:///C:/Users/Veck/AppData/Local/Temp/msohtmlclip1/01/clip_image001.gif)</span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black;"> </span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black;">(</span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">感謝</span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black;">K-STAR</span></span><span class="apple-style-span"><span style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black; font-family: 新細明體, serif;">公司陳課長的指導</span></span><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black;">)</span></span></div>

<div align="right" class="MsoNormal" style="text-align: right;"><span class="apple-style-span"><span lang="EN-US" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; color: black;">  
</span></span></div>

</div>

<span lang="EN-US" style="font-family: Calibri, sans-serif;"></span>  

<div class="separator" style="clear: both; text-align: center;"><span lang="EN-US" style="font-family: Calibri, sans-serif;">[![](http://1.bp.blogspot.com/-0HG-oORAFxs/TqhQ5hAK2YI/AAAAAAAAAHY/2AReT6LT6lQ/s640/2.png)](http://1.bp.blogspot.com/-0HG-oORAFxs/TqhQ5hAK2YI/AAAAAAAAAHY/2AReT6LT6lQ/s1600/2.png)</span></div>

<span lang="EN-US" style="font-family: Calibri, sans-serif;"></span>  

<div><span lang="EN-US" style="font-family: Calibri, sans-serif;"><span lang="EN-US" style="font-family: Calibri, sans-serif;">  
</span></span></div>

<span lang="EN-US" style="font-family: Calibri, sans-serif;">

<div><span lang="EN-US" style="font-family: Calibri, sans-serif;">  
</span></div>

</span>[閱讀更多 »](http://veckcode.blogspot.com/2011/10/ruby-on-rails-mvc-framework-mvc-model.html#more)